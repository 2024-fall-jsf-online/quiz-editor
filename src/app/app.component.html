<div class="container">
  @if (loading) {
    <h1>Loading</h1>
  }
  @if (errorLoadingQuizzes) {
    <div class="row">
      <div class="col-md-12">
        <div class="alert alert-info mt-3">
          Error Loading Quizzes, please try again later!
        </div>
      </div>
    </div>
  } @else {
    <div class="row">
      <div class="col-md-4">
        <button
          class="btn btn-outline-success mt-3 mb-3"
          (click)="addQuiz()"
        >
          Add New Quiz
        </button>
        <div class="card">
          <div class="list-group list-group-flush">
            @for (quiz of quizzes; track $index) {
              <button 
                class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                (click)="selectQuiz(quiz)"
                [class.active]="quiz === selectedQuiz"
                [style.text-decoration]="quiz.markedForDelete ? 'line-through': 'inherit'"
              >
                <span class="text-truncate">{{ quiz.quizName }}</span>
                <small class="font-italic font-weight-lighter text-nowrap">
                  {{ quiz.quizQuestions.length }}
                  @if (quiz.quizQuestions.length !== 1) {
                    <span>questions</span>
                  } @else {
                    <span>question</span>
                  }
                </small>
              </button>
            }
          </div>
        </div>
      </div>
      @if (selectedQuiz != undefined) {
        <div class="col-md-8">
          <div class="mt-3 mb-3">
            <button class="btn btn-outline-dark">
              Save
            </button>
            <button class="btn btn-link">
              Cancel
            </button>
          </div>
          <div class="card">
            <div class="card-header">
              General
            </div>
            <div class="card-body">
              <input
                class="form-control"
                [(ngModel)]="selectedQuiz.quizName"
                placeholder="Enter Quiz Name"
              >
            </div>
          </div>
          <div class="card mt-3">
            <div class="card-header">
              Questions
            </div>
            <div class="card-body">
              <button
                class="btn btn-outline-success"
                (click)="addQuestion()"
              >
                Add New Question
              </button>
              @for (question of selectedQuiz.quizQuestions; track $index) {
                <div class="row mt-3">
                  <div class="col-md-10">
                    <input 
                      type="text"
                      class="form-control"
                      [(ngModel)]="question.questionName"
                      placeholder="Enter Question Name"
                    />
                  </div>
                  <div class="col-md-2">
                    <button
                      class="btn btn-link text-danger"
                      (click)="removeQuestion(question)"
                    >
                      Remove
                    </button>
                  </div>
                </div>
              }
            </div>
          </div>
          <div class="card mt-3">
            <div class="card-header">
              Other
            </div>
            <div class="card-body">
              <div class="form-check">
                <label class="form-check-label text-danger">
                  <input
                    type="checkbox"
                    class="form-check-input"
                    [(ngModel)]="selectedQuiz.markedForDelete"
                  />
                  Mark For Delete
                </label>
              </div>
            </div>
          </div>
        </div>
      } @else {
        <div class="col-md-8 mt-3">
          <div class="card bg-light text-center">
            <h2>No Quiz Selected</h2>
            <p>Select or add a new quiz.</p>
            <button 
              class="btn btn-link"
              (click)="jsPromiseOne()"
            >
              One
            </button>
            <button 
              class="btn btn-link"
              (click)="jsPromiseTwo()"
            >
              Two
            </button>
            <button 
              class="btn btn-link"
              (click)="jsPromiseThree()"
            >
              Three
            </button>
          </div>
        </div>
      }
    </div>
  }
</div>